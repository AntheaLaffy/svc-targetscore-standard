# SVC项目主观评分参考体系（初学者版）

## 1. 引言

### 1.1 背景与目的

声线转换（SVC）技术在音乐制作、语音合成等领域非常重要。简单来说，就是把一个人的声音转换成另一个人的声音。但是，目前缺乏统一的评价标准，导致很难比较不同模型的效果。本文旨在建立一套简单易懂的SVC模型主观评分体系。

### 1.2 适用范围

本评分体系适用于：

- 声线转换模型的效果评估
- 不同SVC算法的横向对比
- 模型迭代优化的效果验证
- 产品化前的质量检验

## 2. 声学基础知识

在了解评分体系之前，我们先了解一些基本的声音知识。

### 2.1 声音的三要素

#### 音高
- **物理基础**：基频（声音的振动频率）
- **感知特征**：我们听到的音调高低
- **图谱表现**：在频谱图中表现为基频条纹的垂直位置

#### 音色
- **物理基础**：频谱结构 + 时间包络
- **感知特征**：声音的"颜色"和质感
- **关键成分**：
  - 谐波结构：泛音的数量与强度分布
  - 共振峰：固定的能量集中区域
  - 时间包络：起音、衰减、释音特征

#### 响度
- **物理基础**：振幅/能量
- **感知特征**：我们感觉到的声音大小
- **图谱表现**：频谱图的整体亮度

### 2.2 声线转换的关键声学参数

| 参数类型 | 具体参数 | 物理意义 | 感知影响 |
|---------|---------|---------|---------|
| 音高相关 | F0 | 基频 | 旋律准确性 |
| 音色相关 | 共振峰结构 | 声道特征 | 声音辨识度 |
| 音色相关 | 频谱包络 | 频响特性 | 音色质感 |
| 动态相关 | Loudness | 能量强度 | 力度表现 |
| 发声方式 | Breathiness | 气声成分 | 柔和度 |
| 发声方式 | Tension | 声带紧张度 | 声音集中度 |
| 发声方式 | Voicing | 周期性成分比例 | 清晰度 |

## 3. 主观评分维度体系

我们的评分体系主要关注两个核心目标：

1. **"像" - 相似度目标**：转换后的声音与目标声线有多像
2. **"好" - 音质目标**：转换后的声音是否自然、听起来舒服

### 3.1 相似度维度 - "像" (满分10分)

#### 音色特征相似度

**基频分布匹配度**
- **参数**：F0_contour_similarity
- **评价点**：转换后声音的音高变化模式是否与目标声线一致
- **低分表现**：音高起伏生硬，没有目标声线的特色
- **高分表现**：音高变化自然，完美复现目标声线的演唱习惯

**共振峰结构相似度**
- **参数**：formant_similarity
- **评价点**：声道特征是否接近目标声线
- **低分表现**：声音"薄厚"感错误，一听就是假的
- **高分表现**：共鸣点位置准确，听起来很真实

**谐波能量分布匹配**
- **参数**：spectral_balance
- **评价点**：高、中、低频能量比例是否匹配
- **低分表现**：某些频段太突出或缺失，听起来不自然
- **高分表现**：频谱包络自然，各频段能量协调

#### 演唱风格相似度

**颤音特征一致性**
- **参数**：vibrato_consistency
- **评价点**：颤音的深度、速度、启动模式是否一致
- **低分表现**：颤音机械、不自然或完全没有
- **高分表现**：颤音细腻，符合目标声线的演唱习惯

**动态处理相似度**
- **参数**：dynamics_handling
- **评价点**：强弱变化、气息控制的处理方式
- **低分表现**：音量变化生硬，缺乏细腻的渐强渐弱
- **高分表现**：动态处理自然，情感表达到位

### 3.2 音质维度 - "好" (满分10分)

#### 音频质量参数

**噪声与伪影控制**
- **参数**：artifact_level
- **评价点**：背景噪声、电音感、爆破音等不良声音的多少
- **低分表现**：明显机械声、嗡嗡声、噼啪声
- **高分表现**：声音干净，没有明显加工痕迹

**频谱连续性**
- **参数**：spectral_smoothness
- **评价点**：声音在时间上的连续性
- **低分表现**：声音抖动、断断续续，有"跳帧"感
- **高分表现**：声音流畅，过渡自然

**相位一致性**
- **参数**：phase_coherence
- **评价点**：声波相位是否稳定
- **低分表现**：声音发虚、定位模糊
- **高分表现**：声音结实，声像稳定

#### 自然度参数

**发音清晰度**
- **参数**：articulation_clarity
- **评价点**：歌词是否清晰可辨，辅音是否完整
- **低分表现**：咬字模糊，特别是辅音丢失严重
- **高分表现**：字正腔圆，每个音节都清晰自然

**气息自然度**
- **参数**：breath_naturalness
- **评价点**：换气、气口是否真实自然
- **低分表现**：气息处理生硬，换气声异常或缺失
- **高分表现**：呼吸节奏自然，符合生理规律

## 4. 四维评分体系详解

我们将评分分为四个维度，每个维度有不同的权重：

- 音色相似度：30%
- 演唱风格相似度：20%
- 音频质量参数：25%
- 自然度：25%

### 4.1 音色相似度 (30%)

**基频分布匹配度**
- 1-3分：音高起伏严重生硬，明显机械感
- 4-5分：基本音准正确但缺乏细节
- 6-7分：音高变化基本自然，能识别目标声线特征
- 8-9分：音高变化流畅，细节丰富
- 10分：专业监听环境下也难以区分

**共振峰结构相似度**
- 1-3分：声音"薄厚"感完全错误，一听就是伪装的
- 4-5分：主要元音共鸣基本正确
- 6-7分：大部分元音共鸣准确，整体匹配度较好
- 8-9分：共鸣点位置精准，喉位感真实
- 10分：声道共鸣特征完全一致，无法分辨真伪

**谐波能量分布匹配**
- 1-3分：频响严重失衡，声音发闷或刺耳
- 4-5分：主要频段能量分布合理，但有明显偏差
- 6-7分：频谱包络基本协调
- 8-9分：频谱包络自然，能量分布高度一致
- 10分：频谱特征完全吻合

### 4.2 演唱风格相似度 (20%)

**颤音特征一致性**
- 1-3分：颤音完全机械规律或完全缺失
- 4-5分：基本颤音特征存在但不够自然
- 6-7分：颤音自然度较好，主要参数匹配
- 8-9分：颤音细腻真实，完美匹配个人习惯
- 10分：颤音特征完全一致，包括启动衰减模式

**动态处理相似度**
- 1-3分：音量变化生硬突兀，完全缺乏渐强渐弱
- 4-5分：主要动态变化基本正确，但细腻度不足
- 6-7分：动态处理自然，强弱变化合理
- 8-9分：动态处理流畅，情感表达到位
- 10分：动态习惯完全还原，包括微小的力度变化

### 4.3 音频质量参数 (25%)

**噪声与伪影控制**
- 1-3分：明显机械声、嗡嗡声、严重电音感
- 4-5分：可察觉的背景噪声和偶尔的电音感
- 6-7分：轻微噪声，基本无电音感
- 8-9分：声音干净透明，极轻微加工痕迹
- 10分：完全无噪声和伪影

**频谱连续性**
- 1-3分：声音明显抖动、断断续续，严重"跳帧"感
- 4-5分：基本流畅但有可察觉的抖动
- 6-7分：声音流畅，轻微帧间不连续
- 8-9分：过渡平滑自然，几乎无断裂感
- 10分：完全无缝衔接

**相位一致性**
- 1-3分：声音严重发虚、飘移不定，定位完全模糊
- 4-5分：声像基本稳定但偶尔飘移
- 6-7分：声像稳定，相位关系合理
- 8-9分：声音结实稳定，定位准确
- 10分：相位一致性完美

### 4.4 自然度 (25%)

**发音清晰度**
- 1-3分：咬字严重模糊，辅音大量丢失，歌词难以辨认
- 4-5分：主要歌词可辨认，但部分辅音不清晰
- 6-7分：发音基本清晰，歌词容易理解
- 8-9分：字正腔圆，每个音节都清晰自然
- 10分：发音完美清晰，与真人演唱无差别

**气息自然度**
- 1-3分：气息处理严重生硬，换气声异常或完全缺失
- 4-5分：基本呼吸模式正确但不够自然
- 6-7分：呼吸节奏基本自然，气息流动合理
- 8-9分：呼吸节奏自然，符合生理规律
- 10分：气息处理完全真实，包括微小的呼吸细节

## 5. 压制算法配置指南

### 5.1 标准Sigmoid压制函数

核心公式：
$$压制因子 = \frac{1}{1 + e^{-k(x - \theta)}}$$

参数计算：
$$k = \frac{4}{右阀门 - 左阀门}$$
$$\theta = \frac{左阀门 + 右阀门}{2}$$

参数说明：
- x：最差维度的归一化分数（0-1）
- θ：压制阈值，决定压制开始的分数点
- k：压制强度，控制压制曲线的陡峭程度
- 左阀门：压制区间起点，分数低于此值将受到强烈压制
- 右阀门：压制区间终点，分数高于此值基本不受压制

### 5.2 参数配置策略

根据不同的质量要求，推荐以下参数配置：

#### 5.2.1 严格质量要求
特点：对低分项目严厉惩罚，适合高质量要求场景
```python
strict_config = {
    'left_valve': 0.2,   // 左阀门=2分
    'right_valve': 0.8,  // 右阀门=8分
    'theta': 0.5,        // θ = (0.2 + 0.8)/2 = 0.5
    'k': 6.67            // k = 4 / (0.8 - 0.2) = 6.67
}
```

#### 5.2.2 标准质量要求
特点：平衡惩罚力度，适合常规测试场景
```python
standard_config = {
    'left_valve': 0.1,   // 左阀门=1分
    'right_valve': 0.7,  // 右阀门=7分
    'theta': 0.4,        // θ = (0.1 + 0.7)/2 = 0.4
    'k': 6.67            // k = 4 / (0.7 - 0.1) = 6.67
}
```

#### 5.2.3 宽松质量要求
特点：宽容低分项目，适合早期研发场景
```python
lenient_config = {
    'left_valve': 0.0,   // 左阀门=0分
    'right_valve': 0.6,  // 右阀门=6分
    'theta': 0.3,        // θ = (0.0 + 0.6)/2 = 0.3
    'k': 6.67            // k = 4 / (0.6 - 0.0) = 6.67
}
```

### 5.3 算法实现

```python
import math

def calculate_parameters(left_valve, right_valve):
    """根据左右阀门计算θ和k值"""
    theta = (left_valve + right_valve) / 2.0
    k = 4.0 / (right_valve - left_valve)
    return theta, k

def calculate_suppression_factor(worst_score, left_valve=0.1, right_valve=0.7):
    """
    计算压制因子
    
    参数:
    worst_score: 最差维度的原始分数(0-10分)
    left_valve: 压制区间左阀门(归一化)
    right_valve: 压制区间右阀门(归一化)
    
    返回:
    压制因子(0-1)
    """
    // 计算θ和k
    theta, k = calculate_parameters(left_valve, right_valve)
    
    // 归一化处理
    x = worst_score / 10.0
    
    // 标准sigmoid压制
    exponent = -k * (x - theta)
    suppression = 1 / (1 + math.exp(exponent))
    
    return suppression

// 配置字典
configs = {
    'strict': {'left_valve': 0.2, 'right_valve': 0.8},
    'standard': {'left_valve': 0.1, 'right_valve': 0.7},
    'lenient': {'left_valve': 0.0, 'right_valve': 0.6}
}
```

### 5.4 压制效果对比（修正后）

#### 严格配置效果 (左阀门=0.2, 右阀门=0.8, θ=0.5, k=6.67)：
| 最差维度分 | 压制因子 | 压制程度 | 说明 |
|-----------|----------|----------|------|
| 0.0 | 0.001 | 几乎完全压制 | 权重压制至约0.1% |
| 1.0 | 0.006 | 极度压制 | 权重压制至约0.6% |
| 2.0 | 0.047 | 重度压制 | 权重压制至约4.7% |
| 3.0 | 0.269 | 中重度压制 | 权重压制至约26.9% |
| 4.0 | 0.500 | 中度压制 | 权重压制至50% |
| 5.0 | 0.731 | 中轻度压制 | 权重压制至约73.1% |
| 6.0 | 0.953 | 轻度压制 | 权重压制至约95.3% |
| 7.0 | 0.994 | 轻微压制 | 权重压制至约99.4% |
| 8.0 | 0.999 | 基本无压制 | 权重压制至约99.9% |

#### 标准配置效果 (左阀门=0.1, 右阀门=0.7, θ=0.4, k=6.67)：
| 最差维度分 | 压制因子 | 压制程度 | 说明 |
|-----------|----------|----------|------|
| 0.0 | 0.006 | 极度压制 | 权重压制至约0.6% |
| 1.0 | 0.047 | 重度压制 | 权重压制至约4.7% |
| 2.0 | 0.269 | 中重度压制 | 权重压制至约26.9% |
| 3.0 | 0.500 | 中度压制 | 权重压制至50% |
| 4.0 | 0.731 | 中轻度压制 | 权重压制至约73.1% |
| 5.0 | 0.953 | 轻度压制 | 权重压制至约95.3% |
| 6.0 | 0.994 | 轻微压制 | 权重压制至约99.4% |
| 7.0 | 0.999 | 基本无压制 | 权重压制至约99.9% |

#### 宽松配置效果 (左阀门=0.0, 右阀门=0.6, θ=0.3, k=6.67)：
| 最差维度分 | 压制因子 | 压制程度 | 说明 |
|-----------|----------|----------|------|
| 0.0 | 0.047 | 重度压制 | 权重压制至约4.7% |
| 1.0 | 0.269 | 中重度压制 | 权重压制至约26.9% |
| 2.0 | 0.500 | 中度压制 | 权重压制至50% |
| 3.0 | 0.731 | 中轻度压制 | 权重压制至约73.1% |
| 4.0 | 0.953 | 轻度压制 | 权重压制至约95.3% |
| 5.0 | 0.994 | 轻微压制 | 权重压制至约99.4% |
| 6.0 | 0.999 | 基本无压制 | 权重压制至约99.9% |

### 5.5 参数调整指南

调整原则：

1. 左阀门：压制区间起点，分数低于此值将受到强烈压制
2. 右阀门：压制区间终点，分数高于此值基本不受压制
3. θ和k自动计算：θ为区间中点，k=4/(右阀门-左阀门)

参数选择建议：

- 严格标准：左阀门=0.2, 右阀门=0.8 (压制2-8分区间)
- 一般标准：左阀门=0.1, 右阀门=0.7 (压制1-7分区间)
- 宽松标准：左阀门=0.0, 右阀门=0.6 (压制0-6分区间)

区间宽度与压制强度：

- 区间宽度 = 右阀门 - 左阀门
- k值 = 4 / 区间宽度
- 区间越窄，压制曲线越陡峭，过渡越迅速
- 区间越宽，压制曲线越平缓，过渡越平滑

对称性验证：
在严格配置中，θ=0.5时：
- 距离θ相等距离的分数应该有互补的压制因子
- 例如：3分(距离θ=0.2)的压制因子为0.269，7分(距离θ=0.2)的压制因子为0.731
- 0.269 + 0.731 = 1.000，验证了对称性

这样的设计确保了压制因子关于阈值θ完全对称，符合sigmoid函数的数学特性。用户只需调整左右阀门值即可控制压制效果，而k和θ会自动计算以确保对称性。

### 5.6 完整评分流程

```python
def calculate_final_weight(scores_dict, config_name='standard'):
    """
    计算最终权重分数(0-100分)
    """
    // 获取配置
    config = configs[config_name]
    
    // 1. 计算各维度基础分
    timbre_score = (scores_dict['pitch_match'] + 
                   scores_dict['formant_similarity'] + 
                   scores_dict['spectral_balance']) / 3

    style_score = (scores_dict['vibrato_consistency'] + 
                  scores_dict['dynamics_handling']) / 2

    quality_score = (scores_dict['artifact_control'] + 
                    scores_dict['spectral_smoothness'] + 
                    scores_dict['phase_coherence']) / 3

    natural_score = (scores_dict['articulation_clarity'] + 
                    scores_dict['breath_naturalness']) / 2

    // 2. 计算加权基础分(0-10分)
    base_score = (timbre_score * 0.30 + 
                 style_score * 0.20 + 
                 quality_score * 0.25 + 
                 natural_score * 0.25)

    // 3. 找到最差维度分
    worst_score = min(timbre_score, style_score, quality_score, natural_score)

    // 4. 计算压制因子
    suppression = calculate_suppression_factor(worst_score, **config)

    // 5. 计算最终权重(0-100分)
    final_weight = base_score * 10 * suppression

    return {
        'config_used': config_name,
        'dimension_scores': {
            'timbre': round(timbre_score, 2),
            'style': round(style_score, 2),
            'quality': round(quality_score, 2),
            'natural': round(natural_score, 2)
        },
        'base_score': round(base_score, 2),
        'worst_score': round(worst_score, 2),
        'suppression_factor': round(suppression, 3),
        'final_weight': round(final_weight, 1)
    }
```

## 6. 使用建议

1. **评分时要全面考虑**：不要只关注某一个维度，要综合考虑所有维度
2. **重点关注最差维度**：任何一个维度表现太差都会显著影响最终得分
3. **多听多比较**：评分时要多听几遍，与原声进行对比
4. **参考分层标准**：根据详细的分层评分标准进行打分，确保评分的一致性

通过这套评分体系，即使是初学者也能对SVC模型的效果进行相对客观的评价。